{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@nomiscz/flarum-ext-auth-steam/./src/forum/components/SteamApplication.js","webpack://@nomiscz/flarum-ext-auth-steam/./src/forum/components/SteamLinkModal.js","webpack://@nomiscz/flarum-ext-auth-steam/./src/forum/components/SteamUnlinkModal.js","webpack://@nomiscz/flarum-ext-auth-steam/./src/forum/index.js","webpack://@nomiscz/flarum-ext-auth-steam/external root \"flarum.core.compat['app']\"","webpack://@nomiscz/flarum-ext-auth-steam/external root \"flarum.core.compat['components/Button']\"","webpack://@nomiscz/flarum-ext-auth-steam/external root \"flarum.core.compat['components/LogInButton']\"","webpack://@nomiscz/flarum-ext-auth-steam/external root \"flarum.core.compat['components/LogInButtons']\"","webpack://@nomiscz/flarum-ext-auth-steam/external root \"flarum.core.compat['components/Modal']\"","webpack://@nomiscz/flarum-ext-auth-steam/external root \"flarum.core.compat['components/SettingsPage']\"","webpack://@nomiscz/flarum-ext-auth-steam/external root \"flarum.core.compat['extend']\"","webpack://@nomiscz/flarum-ext-auth-steam/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@nomiscz/flarum-ext-auth-steam/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@nomiscz/flarum-ext-auth-steam/webpack/bootstrap","webpack://@nomiscz/flarum-ext-auth-steam/webpack/runtime/compat get default export","webpack://@nomiscz/flarum-ext-auth-steam/webpack/runtime/define property getters","webpack://@nomiscz/flarum-ext-auth-steam/webpack/runtime/hasOwnProperty shorthand","webpack://@nomiscz/flarum-ext-auth-steam/webpack/runtime/make namespace object","webpack://@nomiscz/flarum-ext-auth-steam/./forum.js"],"sourcesContent":["export default class SteamApplication\n{\n    linkDone(returnCode) {\n\n        let alert;\n\n        switch (returnCode) {\n\n            case 'already_linked':\n                app.modal.close();\n                alert = app.alerts.show({type: 'error'}, app.translator.trans('nomiscz-auth-steam.forum.alerts.already_linked'));\n                break;\n            case 'already_used':\n                alert = app.alerts.show({type: 'error'}, app.translator.trans('nomiscz-auth-steam.forum.alerts.already_used'));\n                break;\n            case 'done':\n                app.modal.close();\n                app.session.user.savePreferences();\n                alert = app.alerts.show({type: 'success'}, app.translator.trans('nomiscz-auth-steam.forum.alerts.link_success'));\n                break;\n            case 'error':\n                alert = app.alerts.show({type: 'error'}, app.translator.trans('nomiscz-auth-steam.forum.alerts.error'));\n                break;\n        }\n\n        setTimeout(() => {\n            app.alerts.dismiss(alert);\n        }, 5000);\n    }\n}\n","import Modal from 'flarum/components/Modal';\nimport Button from 'flarum/components/Button';\n\nexport default class SteamLinkModal extends Modal {\n    className() {\n        return 'AuthSteamLinkModal Modal--small';\n    }\n\n    title() {\n        return app.translator.trans('nomiscz-auth-steam.forum.modals.link.title');\n    }\n\n    content() {\n        return (\n            <div className=\"Modal-body\">\n                <div className=\"Form Form--centered\">\n                    <div className=\"Form-group\">\n                        <Button className={'Button LogInButton--steam'} icon={'fab fa-steam-symbol'} loading={this.loading} disabled={this.loading}\n                                path={`/auth/${name}`} onclick={() => this.showSteamLogin()}>\n                            {app.translator.trans('nomiscz-auth-steam.forum.buttons.login')}\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    showSteamLogin() {\n\n        const width = 600;\n        const height = 400;\n        const $window = $(window);\n\n        window.open(app.forum.attribute('apiUrl') + '/auth/steam/link', 'steamLinkPopup',\n            `width=${width},` +\n            `height=${height},` +\n            `top=${$window.height() / 2 - height / 2},` +\n            `left=${$window.width() / 2 - width / 2},` +\n            'status=no,scrollbars=no,resizable=no');\n\n        this.loading = true;\n    }\n}\n","import Modal from 'flarum/components/Modal';\nimport Button from 'flarum/components/Button';\n\nexport default class SteamUnlinkModal extends Modal {\n    className() {\n        return 'AuthSteamUnlinkModal Modal--small';\n    }\n\n    title() {\n        return app.translator.trans('nomiscz-auth-steam.forum.modals.unlink.title');\n    }\n\n    content() {\n        const {\n            data: {\n                attributes: {\n                    SteamAuth: {\n                        providersCount = 0\n                    },\n                },\n            },\n        } = app.session.user;\n\n        return (\n            <div className=\"Modal-body\">\n                <div className=\"Form Form--centered\">\n                    <div className=\"Form-group\" id=\"submit-button-group\">\n                        <h3>{app.translator.trans('nomiscz-auth-steam.forum.modals.unlink.info.confirm')}</h3>\n                        {(providersCount <= 1)\n                            ?\n                            <p className=\"SteamText--danger\"><i className=\"fas fa-exclamation-triangle fa-fw\" />\n                                <b>{app.translator.trans('nomiscz-auth-steam.forum.modals.unlink.info.no_providers')}</b>\n                            </p>\n                            : ''\n                        }\n                        <br/>\n                        <div className=\"ButtonGroup\">\n                            <Button type={'submit'} className={'Button SteamButton--danger'} icon={'fas fa-exclamation-triangle'}\n                                    loading={this.loading}>\n                                {app.translator.trans('nomiscz-auth-steam.forum.modals.unlink.buttons.confirm')}\n                            </Button>\n                            <Button className={'Button Button--primary'} icon={'fas fa-exclamation-triangle'}\n                                    onclick={() => this.hide()} disabled={this.loading}>\n                                {app.translator.trans('nomiscz-auth-steam.forum.modals.unlink.buttons.cancel')}\n                            </Button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    onsubmit(e) {\n\n        let alert;\n\n        e.preventDefault();\n        this.loading = true;\n\n        app.request({\n            method: 'POST',\n            url: app.forum.attribute('apiUrl') + '/auth/steam/unlink',\n        }).then(() => {\n            app.session.user.savePreferences();\n            this.hide();\n            alert = app.alerts.show({type: 'success'}, app.translator.trans('nomiscz-auth-steam.forum.alerts.unlink_success'));\n        });\n\n        setTimeout(() => {\n            app.alerts.dismiss(alert);\n        }, 5000);\n    }\n}\n","import { extend } from 'flarum/extend';\nimport app from 'flarum/app';\n\nimport SettingsPage from 'flarum/components/SettingsPage';\nimport SteamApplication from './components/SteamApplication';\nimport SteamUnlinkModal from \"./components/SteamUnlinkModal\";\nimport SteamLinkModal from \"./components/SteamLinkModal\";\n\nimport LogInButtons from 'flarum/components/LogInButtons';\nimport LogInButton from 'flarum/components/LogInButton';\nimport Button from 'flarum/components/Button';\n\napp.initializers.add('nomiscz-auth-steam', () => {\n\n    extend(SettingsPage.prototype, 'accountItems', (items) => {\n        const {\n            data: {\n                attributes: {\n                    SteamAuth: {\n                        isLinked = false\n                    },\n                },\n            },\n        } = app.session.user;\n\n        items.add('linkSteam',\n            <Button className={`Button SteamButton--${isLinked ? 'danger' : 'success'}`} icon={'fab fa-steam-symbol'}\n                         path={`/auth/${name}`} onclick={() => app.modal.show(isLinked ? SteamUnlinkModal : SteamLinkModal)}>\n                {app.translator.trans(`nomiscz-auth-steam.forum.buttons.${isLinked ? 'unlink' : 'link'}`)}\n            </Button>\n        );\n    });\n\n    extend(LogInButtons.prototype, 'items', (items) => {\n        items.add('steam',\n            <LogInButton\n                className={'Button LogInButton--steam'}\n                icon={'fab fa-steam-symbol'}\n                path={'/auth/steam'}>\n                {app.translator.trans('nomiscz-auth-steam.forum.buttons.login')}\n            </LogInButton>\n        );\n    });\n});\n\napp.steam = new SteamApplication();\n","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/LogInButton'];","module.exports = flarum.core.compat['components/LogInButtons'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/SettingsPage'];","module.exports = flarum.core.compat['extend'];","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/forum';\n"],"names":["SteamApplication","linkDone","returnCode","alert","app","modal","close","alerts","show","type","translator","trans","session","user","savePreferences","setTimeout","dismiss","Modal","Button","SteamLinkModal","className","title","content","loading","name","showSteamLogin","width","height","$window","$","window","open","forum","attribute","SteamUnlinkModal","data","attributes","SteamAuth","providersCount","hide","onsubmit","e","preventDefault","request","method","url","then","extend","SettingsPage","LogInButtons","LogInButton","initializers","add","prototype","items","isLinked","steam","setPrototypeOf","_inheritsLoose","subClass","superClass","Object","create","constructor","_setPrototypeOf","o","p","bind","__proto__"],"sourceRoot":""}